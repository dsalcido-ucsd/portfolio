<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3 - Data Visualization with Maps</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body class="project-page project3-page">
    <nav aria-label="Breadcrumb">
        <ol class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li><a href="/projects/">Projects</a></li>
            <li aria-current="page">Project 3</li>
        </ol>
    </nav>

    <main>
        <h1>Peak &amp; Pace: How countries age before and after population peak</h1>
        <p class="subhead">Explore when each country reaches (or doesn't reach) its population peak and how quickly the old-age burden rises afterward.</p>
        
        <section>
            <h2>Introduction</h2>
            <p>This interactive uses United Nations WPP 2024 projections (1950–2100) to show when countries peak in total population and how fast they age after that point. Select countries on the map to compare their old-age dependency ratio (OADR), older adults (65+) per 100 working-age people (15–64), at the peak year versus N years later. A components view breaks growth into natural increase (births − deaths) and net migration by decade.</p>
        </section>

        <section>
            <h2>How to use</h2>
            <ul class="how-to-list">
                <li><strong>Map:</strong> Click a country to select; Shift-click to compare up to 5.</li>
                <li><strong>Slider:</strong> Change N (10–30) to see OADR at Peak + N.</li>
                <li><strong>Decade &amp; Mode:</strong> Choose a decade and toggle Absolute vs Per-1k to view components of change.</li>
                <li><strong>Search &amp; Clear:</strong> Use the search box to jump to a country; Clear selection to reset.</li>
            </ul>
        </section>

        <section>
            <h2>Visualizations</h2>
            <div class="full-bleed">
              <div class="viz-wrap">
                                    <!-- Map + Controls in flexible layout -->
                                    <div class="viz-grid">
                                        <!-- Main map area -->
                                        <div class="map-container">
                                            <svg id="map" width="1100" height="520" role="img" aria-label="World map"></svg>
                                        </div>
                  
                                        <!-- Control panel (legend, slider, search) -->
                                        <aside class="control-panel">
                                            <div class="control-section">
                                                <h3>Filter by peak status</h3>
                                                <div id="legend" class="legend" aria-label="Peak status legend"></div>
                                            </div>
                    
                                            <div class="control-section">
                                                <h3>Years after peak</h3>
                                                <div class="years-control">
                                                    <div class="slider-display">
                                                        <label for="yearsAfter">N = <span id="yearsAfterValue">25</span> years</label>
                                                    </div>
                                                    <input id="yearsAfter" type="range" min="10" max="30" step="5" value="25" />
                                                </div>
                                            </div>
                    
                                            <div class="control-section">
                                                <h3>Country search</h3>
                                                <div class="search-controls">
                                                    <input id="countrySearch" type="text" placeholder="Type country name..." />
                                                    <button id="clearSelection">Clear Selection</button>
                                                </div>
                                            </div>
                                        </aside>
                                    </div>

                                    <!-- OADR slopegraph and Components side-by-side -->
                                    <div class="charts-grid">
                                        <div class="chart-panel">
                                            <h3>Old-Age Dependency Ratio (OADR)</h3>
                                            <div id="oadrChart"></div>
                                        </div>
                  
                                        <div class="chart-panel">
                                            <h3>Components of Change</h3>
                                            <div id="controls"></div>
                                            <div id="componentsChart"></div>
                                        </div>
                                    </div>
              </div>
            </div>
        </section>

        <section>
            <h2>How to read the charts</h2>
            
            <h3>Colors on the map</h3>
            <ul>
                <li><strong>Peaked:</strong> peak occurred before 2025.</li>
                <li><strong>2050:</strong> peak projected 2025–2054.</li>
                <li><strong>2055+:</strong> peak projected 2055 or later.</li>
                <li><strong>No peak (by 2100):</strong> total population never turns downward within 1950–2100.</li>
            </ul>

            <h3>Slopegraph (OADR)</h3>
            <ul>
                <li>Y-axis = older adults per 100 working-age. Higher ⇒ heavier aging burden.</li>
                <li>Upward line ⇒ faster aging after peak, flat may indicate limited change or a no-peak-by-2100 case (both columns use 2100).</li>
                <li><em>Callout:</em> "Japan peaked in 2008, OADR climbs quickly thereafter."</li>
            </ul>

            <h3>Components chart</h3>
            <ul>
                <li>Shows <strong>Births</strong> (+), <strong>Deaths</strong> (−), and <strong>Net migration</strong> (±) for the selected decade.</li>
                <li>Total change = (Births − Deaths) + Net migration.</li>
                <li>Switch to Per-1k to compare countries of different sizes.</li>
                <li><em>Callout:</em> "United States shows negative natural increase in later decades but remains positive overall due to migration."</li>
                <li><em>Callout:</em> "Many Sub-Saharan countries remain 'no peak by 2100' due to sustained natural increase."</li>
            </ul>
        </section>

        <section>
            <h2>Data &amp; methods</h2>
            <p><strong>Sources:</strong> UN World Population Prospects 2024, Standard Projections, Medium variant.</p>
            <ul>
                <li>Population by 5-year age groups (both sexes) → totals and OADR.</li>
                <li>Demographic indicators → births, deaths, net migration (decadal sums; per-1k are decade averages).</li>
            </ul>
            <p><strong>Definitions:</strong> OADR = Pop(65+) / Pop(15–64). "No peak" means no decline within the projection window—not "never."</p>
            <p><strong>Limits:</strong> Peak+N is capped at 2100; results reflect Medium-scenario assumptions about fertility, mortality, and migration.</p>
        </section>
    </main>

    <script type="module" src="../global.js"></script>
    <script type="module" src="project3.js"></script>
</body>
</html>
